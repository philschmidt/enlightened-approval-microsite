var ingress={pflichtfelder:["flevel","fnick","fname","farea","fmail"],pflichtfelder2:["fname_invite","fmail_invite","ftime_invite"],nav:["info","approval","imprint"],init:function(){if($.cookie("lang"))ingress.lang=$.cookie("lang");ingress.intro_anim();$("#errorbox .button").click(function(e){e.preventDefault();$("#errorbox").fadeOut(500)});$("#approval").on("click","button.submit",function(e){e.preventDefault();var t={};var n=0;var r=0;var i=0;if($("#fmail").val().match(/[a-z]|[A-Z]|@/)){if(!ingress.validateEmail($("#fmail").val()))r=1}if($("#flevel").val()=="–"){i=1}else{t["flevel"]=$("#flevel").val()}$("#approval input").each(function(){if($.inArray($(this).attr("id"),ingress.pflichtfelder)>-1&&$(this).val()==""){n=1;$(this).attr("class","error")}else{$(this).attr("class","")}t[$(this).attr("name")]=$(this).val()});$('#approval input[type="checkbox"]').each(function(){if($(this).attr("checked")){t[$(this).attr("name")]="(x)"}else{t[$(this).attr("name")]=""}});t["flang"]=ingress.lang;t["fcode"]="VER-"+t["fnick"].toUpperCase().substr(0,3)+"-"+Math.random().toString(36).substr(2,8);t["fcomment"]="via approval site";if(n==0&&r==0&&i==0){$.post("?post",t,function(e){$("#form_intro").hide();$("#form_inner").hide();$("#logo").hide();$("#approval").attr("class","success");$("#approval input").each(function(){$(this).val("")});$("#errorbox").hide();$("div.success").fadeIn();$("#ver_code").html(t["fcode"])})}else{if(n==1){$("#error").show()}else{$("#error").hide()}if(i==1){$("#errorlevel").show();$("#flevel").attr("class","error")}else{$("#errorlevel").hide();$("#flevel").attr("class","")}if(r==1){$("#errormail").show();$("#fmail").attr("class","error")}else{$("#errormail").hide()}$("#errorbox").fadeIn(500)}});$("#invite").on("click","button.submit",function(e){e.preventDefault();var t=false;var n={};var r=0;if($("#fmail_invite").val().match(/[a-z]|[A-Z]|@/)){if(!ingress.validateEmail($("#fmail_invite").val())){t=true}}$("#invite input").each(function(){if($.inArray($(this).attr("id"),ingress.pflichtfelder2)>-1&&$(this).val()==""){r++;$(this).attr("class","error")}else{$(this).attr("class","")}n[$(this).attr("name")]=$(this).val()});if(!t&&r==0){$.post("?postinvite",n,function(e){$("#form_intro_invite").hide();$("#form_inner_invite").hide();$("#logo_invite").hide();$("#invite").attr("class","success");$("#invite input").each(function(){$(this).val("")});$("#errorbox_invite").hide();$("#invite div.success").fadeIn()})}else{if(r>0){$("#error_invite").show()}else{$("#error_invite").hide()}if(t==true){$("#errormail_invite").show();$("#fmail_invite").attr("class","error")}else{$("#errormail_invite").hide()}$("#errorbox_invite").fadeIn(500)}})},validateEmail:function(e){var t=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;return t.test(e)},changeLang:function(e){$.cookie("lang",e,{expires:365});$("#wrapper_out").fadeOut(500);location.reload(true)},intro_anim:function(){if(window.location.hash!=""){var e=window.location.hash.replace("#","");if($.inArray(e,ingress.nav)>-1){$("#nav a.active").removeClass("active");$("#nav a."+e).addClass("active");$("#info").hide();$("#"+e).show()}}setTimeout(function(){$("#wrapper_out").fadeIn(700);$("#header").fadeIn(700);$("#footer").fadeIn(700);$("#inner").fadeIn(700);if(e=="imprint")$("#"+e).show()},200)},toggle_content:function(){var e=window.location.hash.replace("#","");if($.inArray(e,ingress.nav)>-1){$("#nav a.active").removeClass("active");$("#nav a."+e).addClass("active");$("#inner").fadeToggle(500);setTimeout(function(){$("#inner > div").hide();$("#"+e).show().tinyscrollbar_update()},500);$("#inner").fadeToggle(500)}}};$(document).ready(function(){$(window).load(function(){ingress.init()});$(window).on("hashchange",function(){ingress.toggle_content()})})